<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JusticeLabs - Law Enforcement Technology Platform</title>
    <meta name="description" content="JusticeLabs - Advanced law enforcement technology platform for U.S. police departments. Features community engagement, anonymous tip reporting, emergency response coordination, data integration, and CJIS-compliant security.">
    <meta name="keywords" content="law enforcement technology, police department platform, community engagement, anonymous tips, emergency response, crime mapping, data integration, CJIS compliance">
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #1f2937;
            background: #f8fafc;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .header {
            background: var(--primary-color, #dc2626);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            transition: background 0.2s;
        }

        .nav-links a:hover {
            background: rgba(255,255,255,0.1);
        }

        .hero {
            text-align: center;
            padding: 4rem 0;
            background: linear-gradient(135deg, var(--primary-color, #dc2626), #b91c1c);
            color: white;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 600px;
            margin: 0 auto 2rem;
            opacity: 0.9;
        }

        .btn {
            background: white;
            color: var(--primary-color, #dc2626);
            padding: 0.75rem 2rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .section {
            padding: 4rem 0;
        }

        .section h2 {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 3rem;
            color: #1f2937;
        }

        .discussions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .discussion-card {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            transition: transform 0.2s, box-shadow 0.2s;
            border-left: 4px solid var(--primary-color, #dc2626);
        }

        .discussion-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.1);
        }

        .discussion-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary-color, #dc2626);
        }

        .discussion-description {
            color: #6b7280;
            margin-bottom: 1.5rem;
        }

        .discussion-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
            color: #9ca3af;
        }

        .secure-tips-form {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            border: 2px solid #fee2e2;
        }

        .tips-header {
            background: #fee2e2;
            color: #dc2626;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 0.5rem;
            font-size: 1rem;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .anonymous-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .anonymous-checkbox input[type="checkbox"] {
            width: auto;
            margin: 0;
        }

        .discussions {
            display: grid;
            gap: 1rem;
        }

        .discussion-post {
            background: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid var(--primary-color, #dc2626);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .post-title {
            font-weight: 600;
            color: #1f2937;
        }

        .post-type {
            background: var(--primary-color, #dc2626);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .post-content {
            color: #6b7280;
            line-height: 1.6;
        }

        .admin-panel {
            position: fixed;
            top: 1rem;
            right: 1rem;
            background: white;
            border-radius: 0.5rem;
            padding: 1rem;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            border: 2px solid #e5e7eb;
        }

        .admin-btn {
            background: #f59e0b;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            cursor: pointer;
        }

        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .admin-modal {
            background: white;
            border-radius: 1rem;
            padding: 2rem;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .admin-form {
            display: grid;
            gap: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .hidden {
            display: none !important;
        }

        .loading {
            text-align: center;
            padding: 2rem;
            color: #6b7280;
        }

        .error {
            background: #fee2e2;
            color: #dc2626;
            padding: 1rem;
            border-radius: 0.5rem;
            margin: 1rem 0;
        }

        .privacy-notice {
            background: #eff6ff;
            border: 1px solid #3b82f6;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.875rem;
        }

        .community-alerts {
            background: #fffbeb;
            border: 1px solid #f59e0b;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .alert-item {
            background: white;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 0.5rem 0;
            border-left: 4px solid #f59e0b;
        }

        @media (max-width: 768px) {
            .nav {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .discussions-grid {
                grid-template-columns: 1fr;
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Simple version without Fireproof for now
        console.log('Loading JusticeLabs template...');
        
        // Configuration
            let config = {
                orgName: "Justice Department",
                primaryColor: "#dc2626",
                contactEmail: "justice@example.com",
                logoUrl: "",
                organizationType: "Police Department",
                jurisdiction: "City of Example",
                departmentSize: "Medium (50-200 officers)",
                emergencyMode: false,
                activeIncidents: [],
                publicAlerts: [
                    {
                        id: 1,
                        title: "Community Meeting Tonight",
                        content: "Join us at City Hall at 7 PM for our monthly community justice discussion.",
                        priority: "normal",
                        date: new Date().toISOString(),
                        type: "community"
                    },
                    {
                        id: 2,
                        title: "New Community Resources Available",
                        content: "We've added new legal aid resources and community support services.",
                        priority: "low",
                        date: new Date(Date.now() - 86400000).toISOString(),
                        type: "resources"
                    }
                ],
                communityPrograms: [
                    {
                        id: 1,
                        title: "Neighborhood Watch Program",
                        description: "Join our community watch program to help keep our neighborhoods safe.",
                        status: "active",
                        participants: 45,
                        type: "Community Safety"
                    },
                    {
                        id: 2,
                        title: "Youth Outreach Initiative",
                        description: "Programs connecting local youth with positive role models and career opportunities.",
                        status: "active",
                        participants: 32,
                        type: "Youth Development"
                    }
                ],
                tipCategories: [
                    "Suspicious Activity",
                    "Crime in Progress",
                    "Missing Person",
                    "Wanted Suspect",
                    "Drug Activity",
                    "Traffic Concerns",
                    "Community Concerns",
                    "Other"
                ],
                features: {
                    enableAnonymousTips: true,
                    enablePublicReporting: true,
                    enableEmergencyMode: true,
                    enableCrimeMapping: true,
                    enableDataIntegration: true,
                    enableInteragencySharing: true,
                    enableMobileAccess: true
                },
                security: {
                    cjisCompliant: true,
                    requireAuthentication: true,
                    enableAuditTrail: true,
                    dataEncryption: true,
                    accessLogging: true
                },
                integrations: {
                    enableNCIC: false,
                    enableStateDatabases: false,
                    enableCAD: false,
                    enableRMS: false
                }
            };

            // Load config from localStorage or use defaults
            const savedConfig = localStorage.getItem('justicelabs-config');
            if (savedConfig) {
                config = { ...config, ...JSON.parse(savedConfig) };
            }

            // Update CSS custom properties
            function updateTheme() {
                document.documentElement.style.setProperty('--primary-color', config.primaryColor);
            }

            updateTheme();

            function JusticeLabsApp() {
                const [activeTab, setActiveTab] = React.useState('home');
                const [showAdmin, setShowAdmin] = React.useState(false);
                const [discussions, setDiscussions] = React.useState([]);
                const [alerts, setAlerts] = React.useState([
                    {
                        id: 1,
                        title: "Community Meeting Tonight",
                        content: "Join us at City Hall at 7 PM for our monthly community justice discussion.",
                        priority: "normal",
                        date: new Date().toISOString()
                    },
                    {
                        id: 2,
                        title: "New Community Resources Available",
                        content: "We've added new legal aid resources and community support services.",
                        priority: "low",
                        date: new Date(Date.now() - 86400000).toISOString()
                    }
                ]);

                // Load discussions from Fireproof
                React.useEffect(() => {
                    const loadDiscussions = async () => {
                        try {
                            const { docs } = database.useLiveQuery("_id", { descending: true });
                            setDiscussions(docs || []);
                        } catch (error) {
                            console.error('Error loading discussions:', error);
                        }
                    };
                    loadDiscussions();
                }, []);

                const handleSubmitTip = async (formData) => {
                    try {
                        const { submit } = database.useDocument({
                            title: formData.title,
                            content: formData.content,
                            type: 'secure_tip',
                            author: formData.anonymous ? 'Anonymous' : formData.author,
                            priority: formData.priority,
                            anonymous: formData.anonymous,
                            createdAt: new Date().toISOString()
                        });

                        await submit();

                        // Refresh discussions
                        const { docs } = database.useLiveQuery("_id", { descending: true });
                        setDiscussions(docs || []);

                        setActiveTab('discussions');
                        alert('Thank you for your submission. Your tip has been recorded securely.');
                    } catch (error) {
                        console.error('Error submitting tip:', error);
                        alert('Error submitting tip. Please try again.');
                    }
                };

                const handleSubmitDiscussion = async (formData) => {
                    try {
                        const { submit } = database.useDocument({
                            title: formData.title,
                            content: formData.content,
                            type: 'discussion',
                            author: formData.author,
                            createdAt: new Date().toISOString()
                        });

                        await submit();

                        // Refresh discussions
                        const { docs } = database.useLiveQuery("_id", { descending: true });
                        setDiscussions(docs || []);

                        setActiveTab('discussions');
                    } catch (error) {
                        console.error('Error submitting discussion:', error);
                        alert('Error submitting discussion. Please try again.');
                    }
                };

                const handleSaveConfig = (newConfig) => {
                    config = { ...config, ...newConfig };
                    localStorage.setItem('justicelabs-config', JSON.stringify(config));
                    updateTheme();
                    setShowAdmin(false);
                };

                return (
                    <div>
                        {/* Header */}
                        <header className="header">
                            <div className="nav">
                                <div className="logo">{config.orgName}</div>
                                <nav className="nav-links">
                                    <a href="#" onClick={() => setActiveTab('home')} className={activeTab === 'home' ? 'active' : ''}>Home</a>
                                    <a href="#" onClick={() => setActiveTab('community')} className={activeTab === 'community' ? 'active' : ''}>Community</a>
                                    <a href="#" onClick={() => setActiveTab('tips')} className={activeTab === 'tips' ? 'active' : ''}>Submit Tip</a>
                                    {config.features.enableEmergencyMode && (
                                        <a href="#" onClick={() => setActiveTab('emergency')} className={activeTab === 'emergency' ? 'active' : ''}>Emergency</a>
                                    )}
                                    <a href="#" onClick={() => setActiveTab('contributions')} className={activeTab === 'contributions' ? 'active' : ''}>Community Input</a>
                                </nav>
                            </div>
                        </header>

                        {/* Admin Panel Button */}
                        <div className="admin-panel">
                            <button className="admin-btn" onClick={() => setShowAdmin(true)}>
                                ⚙️ Admin
                            </button>
                        </div>

                        {/* Main Content */}
                        <main>
                            {/* Home Tab */}
                            {activeTab === 'home' && (
                                <div>
                                    <div className="hero">
                                        <div className="container">
                                            <div className="hero-content">
                                                <h1>Welcome to {config.orgName}</h1>
                                                <p>Your comprehensive law enforcement technology platform for community engagement, emergency response, and data-driven policing</p>
                                                <div style={{display: 'flex', gap: '1rem', justifyContent: 'center', flexWrap: 'wrap'}}>
                                                    <button className="btn btn-primary" onClick={() => setActiveTab('community')}>
                                                        Community Programs
                                                    </button>
                                                    <button className="btn btn-outline" onClick={() => setActiveTab('tips')}>
                                                        Submit Tip
                                                    </button>
                                                    {config.features.enableEmergencyMode && (
                                                        <button className="btn btn-secondary" onClick={() => setActiveTab('emergency')}>
                                                            Emergency Response
                                                        </button>
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    {/* Quick Stats Dashboard */}
                                    <section className="section">
                                        <div className="container">
                                            <div className="section-header">
                                                <h2 className="section-title">Department Overview</h2>
                                                <p className="section-subtitle">Real-time information and community engagement metrics</p>
                                            </div>

                                            <div style={{
                                                display: 'grid',
                                                gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))',
                                                gap: '2rem',
                                                marginBottom: '3rem'
                                            }}>
                                                <div style={{
                                                    background: 'white',
                                                    borderRadius: '1rem',
                                                    padding: '2rem',
                                                    textAlign: 'center',
                                                    boxShadow: '0 4px 20px rgba(0,0,0,0.05)',
                                                    border: '2px solid var(--gray-100)'
                                                }}>
                                                    <div style={{fontSize: '3rem', marginBottom: '1rem'}}>📊</div>
                                                    <h3 style={{fontSize: '2rem', fontWeight: '700', color: 'var(--primary-color)'}}>24</h3>
                                                    <p style={{color: 'var(--gray-600)'}}>Active Community Programs</p>
                                                </div>

                                                <div style={{
                                                    background: 'white',
                                                    borderRadius: '1rem',
                                                    padding: '2rem',
                                                    textAlign: 'center',
                                                    boxShadow: '0 4px 20px rgba(0,0,0,0.05)',
                                                    border: '2px solid var(--gray-100)'
                                                }}>
                                                    <div style={{fontSize: '3rem', marginBottom: '1rem'}}>💬</div>
                                                    <h3 style={{fontSize: '2rem', fontWeight: '700', color: 'var(--primary-color)'}}>156</h3>
                                                    <p style={{color: 'var(--gray-600)'}}>Community Tips This Month</p>
                                                </div>

                                                <div style={{
                                                    background: 'white',
                                                    borderRadius: '1rem',
                                                    padding: '2rem',
                                                    textAlign: 'center',
                                                    boxShadow: '0 4px 20px rgba(0,0,0,0.05)',
                                                    border: '2px solid var(--gray-100)'
                                                }}>
                                                    <div style={{fontSize: '3rem', marginBottom: '1rem'}}>🛡️</div>
                                                    <h3 style={{fontSize: '2rem', fontWeight: '700', color: 'var(--primary-color)'}}>98%</h3>
                                                    <p style={{color: 'var(--gray-600)'}}>Community Trust Rating</p>
                                                </div>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            )}

                            {/* Community Programs Tab */}
                            {activeTab === 'community' && (
                                <section className="section">
                                    <div className="container">
                                        <div className="section-header">
                                            <h2 className="section-title">Community Programs & Initiatives</h2>
                                            <p className="section-subtitle">Programs that strengthen community-police partnerships</p>
                                        </div>

                                        <div className="programs-grid">
                                            {config.communityPrograms.map(program => (
                                                <div key={program.id} className="program-card">
                                                    <div className="program-header">
                                                        <div>
                                                            <div className="program-title">{program.title}</div>
                                                            <div className="program-category">{program.type}</div>
                                                        </div>
                                                        <div className={"program-status " + program.status}>
                                                            {program.status}
                                                        </div>
                                                    </div>

                                                    <div className="program-description">{program.description}</div>

                                                    <div className="program-meta">
                                                        <div style={{display: 'flex', alignItems: 'center', gap: '1rem'}}>
                                                            <span>👥 {program.participants} participants</span>
                                                            <span>📅 Ongoing</span>
                                                        </div>
                                                    </div>

                                                    <div style={{marginTop: '1.5rem'}}>
                                                        <div style={{fontSize: '0.9rem', color: 'var(--gray-600)', marginBottom: '1rem'}}>
                                                            <strong>Program Focus:</strong> Building stronger community relationships
                                                        </div>

                                                        <div style={{display: 'flex', gap: '0.5rem', flexWrap: 'wrap'}}>
                                                            <button className="btn btn-primary" style={{fontSize: '0.9rem', padding: '0.5rem 1rem'}}>
                                                                Join Program
                                                            </button>
                                                            <button className="btn btn-secondary" style={{fontSize: '0.9rem', padding: '0.5rem 1rem'}}>
                                                                Learn More
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </section>
                            )}

                            {/* Submit Tip Tab */}
                            {activeTab === 'tips' && (
                                <section className="section">
                                    <div className="container">
                                        <div className="section-header">
                                            <h2 className="section-title">Anonymous Tip Reporting</h2>
                                            <p className="section-subtitle">Help keep our community safe - submit tips securely and anonymously</p>
                                        </div>

                                        <div style={{maxWidth: '800px', margin: '0 auto'}}>
                                            <div style={{
                                                background: 'white',
                                                borderRadius: '1.5rem',
                                                padding: '3rem',
                                                boxShadow: '0 10px 40px rgba(0,0,0,0.05)',
                                                border: '2px solid var(--gray-100)'
                                            }}>
                                                <div style={{textAlign: 'center', marginBottom: '2rem'}}>
                                                    <h3 style={{fontSize: '1.5rem', fontWeight: '600', color: 'var(--gray-900)', marginBottom: '0.5rem'}}>
                                                        🔒 Secure Anonymous Tip Submission
                                                    </h3>
                                                    <p style={{color: 'var(--gray-600)'}}>
                                                        Your tips help solve crimes and prevent incidents. Submit anonymously or with contact info - your privacy is protected.
                                                    </p>
                                                </div>

                                                {/* Security Notice */}
                                                <div className="privacy-notice">
                                                    <h4>🔒 Security & Privacy</h4>
                                                    <p>
                                                        <strong>Your privacy is protected:</strong> Tips can be submitted completely anonymously.
                                                        All submissions are encrypted and stored securely according to CJIS standards.
                                                    </p>
                                                    <p style={{marginTop: '0.5rem'}}>
                                                        <strong>Important:</strong> For emergencies, call 911 immediately. This form is for non-emergency tips and information.
                                                    </p>
                                                </div>

                                                <SecureTipsForm onSubmit={handleSubmitTip} />

                                                <div style={{
                                                    background: 'var(--gray-50)',
                                                    borderRadius: '0.75rem',
                                                    padding: '1.5rem',
                                                    marginTop: '2rem',
                                                    fontSize: '0.9rem',
                                                    color: 'var(--gray-600)',
                                                    textAlign: 'center'
                                                }}>
                                                    <p>
                                                        <strong>How tips help:</strong> Community tips have helped solve numerous cases and prevent crimes.
                                                        Your information, no matter how small, can make a significant difference in keeping our community safe.
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            )}

                            {/* Emergency Response Tab */}
                            {activeTab === 'emergency' && config.features.enableEmergencyMode && (
                                <section className="section">
                                    <div className="container">
                                        <h2>Emergency Response Center</h2>
                                        <p>Real-time incident management and coordination</p>
                                        
                                        <div className="card">
                                            <h3>Emergency Status</h3>
                                            <p>Emergency mode is {config.emergencyMode ? 'ACTIVE' : 'READY'}</p>
                                            <p>Active Incidents: {config.activeIncidents.length}</p>
                                        </div>
                                    </div>
                                </section>
                            )}

                            {/* Community Discussions */}
                            {activeTab === 'discussions' && (
                                <section className="section">
                                    <div className="container">
                                        <h3>Recent Posts</h3>
                                        <div className="discussions">
                                            {discussions.filter(d => d.type === 'discussion').length === 0 ? (
                                                <div className="loading">No discussions yet. Start the conversation!</div>
                                            ) : (
                                                discussions.filter(d => d.type === 'discussion').map(discussion => (
                                                    <div key={discussion._id} className="discussion-post">
                                                        <div className="post-header">
                                                            <div className="post-title">{discussion.title}</div>
                                                            <div className="post-type">{discussion.type}</div>
                                                        </div>
                                                        <div className="post-content">{discussion.content}</div>
                                                        <div style={{fontSize: '0.875rem', color: '#6b7280', marginTop: '0.5rem'}}>
                                                            By {discussion.author} • {new Date(discussion.createdAt).toLocaleDateString()}
                                                        </div>
                                                    </div>
                                                ))
                                            )}
                                        </div>
                                    </div>
                                </section>
                            )}

                            {/* Alerts Tab */}
                            {activeTab === 'alerts' && (
                                <section className="section">
                                    <div className="container">
                                        <h2>Community Alerts</h2>
                                        <div className="community-alerts">
                                            {alerts.map(alert => (
                                                <div key={alert.id} className="alert-item">
                                                    <h4>{alert.title}</h4>
                                                    <p>{alert.content}</p>
                                                    <div style={{fontSize: '0.875rem', color: '#6b7280'}}>
                                                        {new Date(alert.date).toLocaleDateString()}
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </section>
                            )}
                        </main>

                        {/* Admin Modal */}
                        {showAdmin && (
                            <div className="admin-overlay">
                                <div className="admin-modal">
                                    <div className="admin-header">
                                        <h2 className="admin-title">JusticeLabs Administration</h2>
                                        <p className="admin-subtitle">Configure your law enforcement technology platform settings</p>
                                    </div>

                                    <div className="admin-body">
                                        <form onSubmit={(e) => {
                                            e.preventDefault();
                                            const formData = new FormData(e.target);
                                            handleSaveConfig({
                                                orgName: formData.get('orgName'),
                                                primaryColor: formData.get('primaryColor'),
                                                contactEmail: formData.get('contactEmail'),
                                                logoUrl: formData.get('logoUrl'),
                                                organizationType: formData.get('organizationType'),
                                                jurisdiction: formData.get('jurisdiction'),
                                                departmentSize: formData.get('departmentSize'),
                                                emergencyMode: formData.get('emergencyMode') === 'on',
                                                features: {
                                                    enableAnonymousTips: formData.get('enableAnonymousTips') === 'on',
                                                    enablePublicReporting: formData.get('enablePublicReporting') === 'on',
                                                    enableEmergencyMode: formData.get('enableEmergencyMode') === 'on',
                                                    enableCrimeMapping: formData.get('enableCrimeMapping') === 'on',
                                                    enableDataIntegration: formData.get('enableDataIntegration') === 'on',
                                                    enableInteragencySharing: formData.get('enableInteragencySharing') === 'on',
                                                    enableMobileAccess: formData.get('enableMobileAccess') === 'on'
                                                },
                                                security: {
                                                    cjisCompliant: formData.get('cjisCompliant') === 'on',
                                                    requireAuthentication: formData.get('requireAuthentication') === 'on',
                                                    enableAuditTrail: formData.get('enableAuditTrail') === 'on',
                                                    dataEncryption: formData.get('dataEncryption') === 'on',
                                                    accessLogging: formData.get('accessLogging') === 'on'
                                                },
                                                integrations: {
                                                    enableNCIC: formData.get('enableNCIC') === 'on',
                                                    enableStateDatabases: formData.get('enableStateDatabases') === 'on',
                                                    enableCAD: formData.get('enableCAD') === 'on',
                                                    enableRMS: formData.get('enableRMS') === 'on'
                                                }
                                            });
                                        }} className="admin-form">
                                            <div className="admin-section">
                                                <h3 className="admin-section-title">🏛️ Law Enforcement Agency Settings</h3>
                                                <div className="form-row">
                                                    <div className="form-group">
                                                        <label htmlFor="orgName">Agency Name</label>
                                                        <input
                                                            type="text"
                                                            id="orgName"
                                                            name="orgName"
                                                            defaultValue={config.orgName}
                                                            placeholder="Your police department name"
                                                        />
                                                    </div>

                                                    <div className="form-group">
                                                        <label htmlFor="organizationType">Agency Type</label>
                                                        <select id="organizationType" name="organizationType" defaultValue={config.organizationType}>
                                                            <option value="Police Department">Police Department</option>
                                                            <option value="Sheriff's Office">Sheriff's Office</option>
                                                            <option value="State Police">State Police</option>
                                                            <option value="Federal Agency">Federal Agency</option>
                                                            <option value="Municipal Police">Municipal Police</option>
                                                            <option value="Other">Other</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div className="form-row">
                                                    <div className="form-group">
                                                        <label htmlFor="jurisdiction">Jurisdiction</label>
                                                        <input
                                                            type="text"
                                                            id="jurisdiction"
                                                            name="jurisdiction"
                                                            defaultValue={config.jurisdiction}
                                                            placeholder="City, County, or Region"
                                                        />
                                                    </div>

                                                    <div className="form-group">
                                                        <label htmlFor="departmentSize">Department Size</label>
                                                        <select id="departmentSize" name="departmentSize" defaultValue={config.departmentSize}>
                                                            <option value="Small (1-50 officers)">Small (1-50 officers)</option>
                                                            <option value="Medium (50-200 officers)">Medium (50-200 officers)</option>
                                                            <option value="Large (200-500 officers)">Large (200-500 officers)</option>
                                                            <option value="Very Large (500+ officers)">Very Large (500+ officers)</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div className="form-row">
                                                    <div className="form-group">
                                                        <label htmlFor="primaryColor">Department Colors</label>
                                                        <input
                                                            type="color"
                                                            id="primaryColor"
                                                            name="primaryColor"
                                                            defaultValue={config.primaryColor}
                                                        />
                                                    </div>

                                                    <div className="form-group">
                                                        <label htmlFor="contactEmail">Public Contact Email</label>
                                                        <input
                                                            type="email"
                                                            id="contactEmail"
                                                            name="contactEmail"
                                                            defaultValue={config.contactEmail}
                                                            placeholder="tips@yourdept.gov"
                                                        />
                                                    </div>
                                                </div>

                                                <div className="form-group">
                                                    <label htmlFor="logoUrl">Department Logo URL</label>
                                                    <input
                                                        type="url"
                                                        id="logoUrl"
                                                        name="logoUrl"
                                                        defaultValue={config.logoUrl}
                                                        placeholder="https://yourdept.gov/logo.png"
                                                    />
                                                </div>
                                            </div>

                                            <div className="admin-section">
                                                <h3 className="admin-section-title">⚙️ Community Engagement Features</h3>
                                                <div style={{display: 'grid', gap: '1rem'}}>
                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableAnonymousTips" defaultChecked={config.features.enableAnonymousTips} />
                                                        Enable anonymous tip submission
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enablePublicReporting" defaultChecked={config.features.enablePublicReporting} />
                                                        Enable public crime reporting
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableEmergencyMode" defaultChecked={config.features.enableEmergencyMode} />
                                                        Enable emergency response coordination
                                                    </label>
                                                </div>
                                            </div>

                                            <div className="admin-section">
                                                <h3 className="admin-section-title">📊 Data & Analytics Features</h3>
                                                <div style={{display: 'grid', gap: '1rem'}}>
                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableCrimeMapping" defaultChecked={config.features.enableCrimeMapping} />
                                                        Enable crime mapping and visualization
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableDataIntegration" defaultChecked={config.features.enableDataIntegration} />
                                                        Enable data integration with criminal databases
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableInteragencySharing" defaultChecked={config.features.enableInteragencySharing} />
                                                        Enable interagency information sharing
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableMobileAccess" defaultChecked={config.features.enableMobileAccess} />
                                                        Enable mobile access for officers
                                                    </label>
                                                </div>
                                            </div>

                                            <div className="admin-section">
                                                <h3 className="admin-section-title">🔒 Security & Compliance</h3>
                                                <div style={{display: 'grid', gap: '1rem'}}>
                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="cjisCompliant" defaultChecked={config.security.cjisCompliant} />
                                                        CJIS compliant security measures
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="requireAuthentication" defaultChecked={config.security.requireAuthentication} />
                                                        Require user authentication for sensitive features
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableAuditTrail" defaultChecked={config.security.enableAuditTrail} />
                                                        Enable detailed audit trails
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="dataEncryption" defaultChecked={config.security.dataEncryption} />
                                                        Enable end-to-end data encryption
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="accessLogging" defaultChecked={config.security.accessLogging} />
                                                        Enable comprehensive access logging
                                                    </label>
                                                </div>
                                            </div>

                                            <div className="admin-section">
                                                <h3 className="admin-section-title">🔗 Database Integrations</h3>
                                                <div style={{display: 'grid', gap: '1rem'}}>
                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableNCIC" defaultChecked={config.integrations.enableNCIC} />
                                                        Enable NCIC (National Crime Information Center) integration
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableStateDatabases" defaultChecked={config.integrations.enableStateDatabases} />
                                                        Enable state criminal database integration
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableCAD" defaultChecked={config.integrations.enableCAD} />
                                                        Enable Computer-Aided Dispatch (CAD) integration
                                                    </label>

                                                    <label style={{display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                                        <input type="checkbox" name="enableRMS" defaultChecked={config.integrations.enableRMS} />
                                                        Enable Records Management System (RMS) integration
                                                    </label>
                                                </div>
                                            </div>

                                            <div className="form-actions">
                                                <button type="button" className="btn btn-secondary" onClick={() => setShowAdmin(false)}>
                                                    Cancel
                                                </button>
                                                <button type="submit" className="btn btn-primary">
                                                    Save Configuration
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                            </div>
                        )}

                        {/* Footer */}
                        <footer className="footer">
                            <div className="container">
                                <div className="footer-content">
                                    <div className="footer-section">
                                        <h3>🛡️ {config.orgName}</h3>
                                        <p>{config.organizationType} - {config.jurisdiction}. Building safer communities through technology, transparency, and community partnerships.</p>
                                        <p style={{marginTop: '1rem'}}>
                                            <strong>Contact:</strong> {config.contactEmail}
                                        </p>
                                    </div>

                                    <div className="footer-section">
                                        <h3>🚔 Law Enforcement Technology</h3>
                                        <p>• Community engagement & transparency</p>
                                        <p>• Anonymous tip reporting</p>
                                        <p>• Emergency response coordination</p>
                                        <p>• Data integration & crime mapping</p>
                                    </div>

                                    <div className="footer-section">
                                        <h3>🔗 Platform Features</h3>
                                        <p><a href="#" onClick={() => setActiveTab('community')}>Community Programs</a></p>
                                        <p><a href="#" onClick={() => setActiveTab('tips')}>Submit Tips</a></p>
                                        {config.features.enableEmergencyMode && (
                                            <p><a href="#" onClick={() => setActiveTab('emergency')}>Emergency Response</a></p>
                                        )}
                                        <p><a href="#" onClick={() => setActiveTab('contributions')}>Community Input</a></p>
                                        <p><a href="#" onClick={() => setShowAdmin(true)}>Admin Settings</a></p>
                                    </div>
                                </div>

                                <div className="footer-bottom">
                                    <p>&copy; 2024 {config.orgName}. Law enforcement technology platform powered by LabsForAmerica and Fireproof Database.</p>
                                </div>
                            </div>
                        </footer>
                    </div>
                );
            }

            // Discussion Form Component
            function DiscussionForm({ onSubmit }) {
                const [formData, setFormData] = React.useState({
                    title: '',
                    content: '',
                    author: ''
                });

                const handleSubmit = (e) => {
                    e.preventDefault();
                    if (formData.title && formData.content && formData.author) {
                        onSubmit(formData);
                        setFormData({ title: '', content: '', author: '' });
                    }
                };

                const handleChange = (field, value) => {
                    setFormData(prev => ({ ...prev, [field]: value }));
                };

                return (
                    <form onSubmit={handleSubmit}>
                        <div className="form-group">
                            <label htmlFor="author">Your Name</label>
                            <input
                                type="text"
                                id="author"
                                value={formData.author}
                                onChange={(e) => handleChange('author', e.target.value)}
                                placeholder="Enter your name"
                                required
                            />
                        </div>

                        <div className="form-group">
                            <label htmlFor="title">Discussion Title</label>
                            <input
                                type="text"
                                id="title"
                                value={formData.title}
                                onChange={(e) => handleChange('title', e.target.value)}
                                placeholder="What would you like to discuss?"
                                required
                            />
                        </div>

                        <div className="form-group">
                            <label htmlFor="content">Discussion Content</label>
                            <textarea
                                id="content"
                                value={formData.content}
                                onChange={(e) => handleChange('content', e.target.value)}
                                placeholder="Share your thoughts, questions, or concerns..."
                                required
                            />
                        </div>

                        <button type="submit" className="btn">
                            Start Discussion
                        </button>
                    </form>
                );
            }

            // Secure Tips Form Component
            function SecureTipsForm({ onSubmit }) {
                const [formData, setFormData] = React.useState({
                    title: '',
                    content: '',
                    priority: 'medium',
                    author: '',
                    anonymous: true
                });

                const handleSubmit = (e) => {
                    e.preventDefault();
                    if (formData.title && formData.content) {
                        onSubmit(formData);
                        setFormData({ title: '', content: '', priority: 'medium', author: '', anonymous: true });
                    }
                };

                const handleChange = (field, value) => {
                    setFormData(prev => ({ ...prev, [field]: value }));
                };

                return (
                    <form onSubmit={handleSubmit}>
                        <div className="privacy-notice">
                            <strong>Privacy First:</strong> Your submission is stored locally and encrypted.
                            You control what information you share. Anonymous submissions are encouraged.
                        </div>

                        <div className="anonymous-checkbox">
                            <input
                                type="checkbox"
                                id="anonymous"
                                checked={formData.anonymous}
                                onChange={(e) => handleChange('anonymous', e.target.checked)}
                            />
                            <label htmlFor="anonymous">Submit anonymously (recommended)</label>
                        </div>

                        {!formData.anonymous && (
                            <div className="form-group">
                                <label htmlFor="author">Your Name (if not anonymous)</label>
                                <input
                                    type="text"
                                    id="author"
                                    value={formData.author}
                                    onChange={(e) => handleChange('author', e.target.value)}
                                    placeholder="Enter your name"
                                />
                            </div>
                        )}

                        <div className="form-group">
                            <label htmlFor="title">Tip Title</label>
                            <input
                                type="text"
                                id="title"
                                value={formData.title}
                                onChange={(e) => handleChange('title', e.target.value)}
                                placeholder="Brief description of your tip"
                                required
                            />
                        </div>

                        <div className="form-group">
                            <label htmlFor="priority">Priority Level</label>
                            <select
                                id="priority"
                                value={formData.priority}
                                onChange={(e) => handleChange('priority', e.target.value)}
                            >
                                <option value="low">Low - General information</option>
                                <option value="medium">Medium - Important but not urgent</option>
                                <option value="high">High - Requires immediate attention</option>
                                <option value="urgent">Urgent - Critical safety concern</option>
                            </select>
                        </div>

                        <div className="form-group">
                            <label htmlFor="content">Details</label>
                            <textarea
                                id="content"
                                value={formData.content}
                                onChange={(e) => handleChange('content', e.target.value)}
                                placeholder="Provide as much detail as you're comfortable sharing..."
                                required
                            />
                        </div>

                        <button type="submit" className="btn">
                            Submit Secure Tip
                        </button>
                    </form>
                );
            }

            // Admin Form Component (same as CivicLabs)
            function AdminForm({ config, onSave, onCancel }) {
                const [formData, setFormData] = React.useState(config);

                const handleChange = (field, value) => {
                    setFormData(prev => ({ ...prev, [field]: value }));
                };

                const handleSubmit = (e) => {
                    e.preventDefault();
                    onSave(formData);
                };

                return (
                    <form onSubmit={handleSubmit} className="admin-form">
                        <div className="form-row">
                            <div className="form-group">
                                <label htmlFor="orgName">Organization Name</label>
                                <input
                                    type="text"
                                    id="orgName"
                                    value={formData.orgName}
                                    onChange={(e) => handleChange('orgName', e.target.value)}
                                    placeholder="Your organization name"
                                />
                            </div>

                            <div className="form-group">
                                <label htmlFor="primaryColor">Primary Color</label>
                                <input
                                    type="color"
                                    id="primaryColor"
                                    value={formData.primaryColor}
                                    onChange={(e) => handleChange('primaryColor', e.target.value)}
                                />
                            </div>
                        </div>

                        <div className="form-row">
                            <div className="form-group">
                                <label htmlFor="contactEmail">Contact Email</label>
                                <input
                                    type="email"
                                    id="contactEmail"
                                    value={formData.contactEmail}
                                    onChange={(e) => handleChange('contactEmail', e.target.value)}
                                    placeholder="justice@example.com"
                                />
                            </div>

                            <div className="form-group">
                                <label htmlFor="logoUrl">Logo URL (optional)</label>
                                <input
                                    type="url"
                                    id="logoUrl"
                                    value={formData.logoUrl}
                                    onChange={(e) => handleChange('logoUrl', e.target.value)}
                                    placeholder="https://example.com/logo.png"
                                />
                            </div>
                        </div>

                        <div className="form-actions">
                            <button type="button" className="btn btn-secondary" onClick={onCancel}>
                                Cancel
                            </button>
                            <button type="submit" className="btn">
                                Save Settings
                            </button>
                        </div>
                    </form>
                );
            }

            // Render the app
            const root = ReactDOM.createRoot(document.getElementById('root'));
            root.render(<JusticeLabsApp />);
    </script>
</body>
</html>
